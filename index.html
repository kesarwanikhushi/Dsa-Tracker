<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DSA Tracker</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #e0e0e0;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.3s, color 0.3s;
    }
    body.light {
      background: #f0f0f0;
      color: #212121;
    }
    h1 {
      color: #90caf9;
    }
    body.light h1 {
      color: #1976d2;
    }
    .tracker {
      background: #1e1e1e;
      border-radius: 16px;
      padding: 20px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      transition: background 0.3s;
    }
    body.light .tracker {
      background: #ffffff;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .topic {
      margin-bottom: 15px;
    }
    .topic-header {
      display: flex;
      align-items: center;
    }
    .topic-header > input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }
    .description {
      font-size: 13px;
      color: #bdbdbd;
      margin-left: 28px;
      margin-bottom: 6px;
    }
    body.light .description {
      color: #616161;
    }
    .subtopics {
      margin-left: 28px;
      list-style-type: none;
      padding-left: 0;
      color: #a5d6a7;
      font-size: 13px;
    }
    body.light .subtopics {
      color: #388e3c;
    }
    .subtopics li {
      margin-bottom: 4px;
      display: flex;
      align-items: center;
    }
    .subtopics li input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.1);
      cursor: pointer;
    }
    .progress-bar {
      background: #333;
      border-radius: 8px;
      overflow: hidden;
      margin: 20px 0;
    }
    body.light .progress-bar {
      background: #ccc;
    }
    .progress {
      height: 16px;
      background: #66bb6a;
      width: 0%;
      transition: width 0.3s ease;
    }
    .reset-button {
      background-color: #d32f2f;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
      transition: background 0.3s ease;
    }
    .reset-button:hover {
      background-color: #b71c1c;
    }
    #difficultyFilter {
      margin-bottom: 10px;
      padding: 6px;
      border-radius: 8px;
      border: 1px solid #555;
      background: #2e2e2e;
      color: #e0e0e0;
      font-size: 14px;
    }
    body.light #difficultyFilter {
      background: #e0e0e0;
      color: #212121;
      border: 1px solid #aaa;
    }
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
    }
    .theme-toggle span {
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .theme-toggle span:hover {
      transform: scale(1.2);
    }
  </style>
</head>
<body>
  <div class="theme-toggle">
    <span id="themeIcon" onclick="toggleTheme()">ðŸŒ™</span>
  </div>
  <h1>ðŸ“š DSA Tracker</h1>
  <div class="tracker">
    <select id="difficultyFilter" onchange="filterTopics()">
      <option value="All">All</option>
      <option value="Easy">Easy</option>
      <option value="Medium">Medium</option>
      <option value="Hard">Hard</option>
    </select>

    <div class="progress-bar">
      <div class="progress" id="progress"></div>
    </div>
    <div id="topics"></div>
    <button class="reset-button" onclick="resetProgress()">Reset Progress</button>
  </div>

  <script>
    const topics = [
      {
        name: "Arrays",
        description: "Collection of items stored at contiguous memory locations.",
        difficulty: "Easy",
        subtopics: ["Traversal", "Insertion", "Deletion", "Searching", "Sorting"]
      },
      {
        name: "Strings",
        description: "Sequence of characters used to represent text.",
        difficulty: "Easy",
        subtopics: ["Reversal", "Palindrome Check", "Pattern Matching", "String Compression"]
      },
      {
        name: "Linked Lists",
        description: "Linear data structure where elements point to the next.",
        difficulty: "Medium",
        subtopics: ["Singly Linked List", "Doubly Linked List", "Circular Linked List", "Reversal"]
      },
      {
        name: "Stacks & Queues",
        description: "LIFO and FIFO data structures for storing and managing data.",
        difficulty: "Medium",
        subtopics: ["Stack using Arrays", "Queue using Arrays", "Stack using Linked List", "Queue using Linked List"]
      },
      {
        name: "Trees",
        description: "Hierarchical data structure with a root node.",
        difficulty: "Medium",
        subtopics: ["Binary Tree", "Binary Search Tree", "Traversals", "Balanced Trees"]
      },
      {
        name: "Graphs",
        description: "Set of nodes connected by edges.",
        difficulty: "Hard",
        subtopics: ["BFS", "DFS", "Cycle Detection", "Shortest Path (Dijkstra, Bellman-Ford)"]
      },
      {
        name: "Dynamic Programming",
        description: "Solves problems by breaking into overlapping subproblems.",
        difficulty: "Hard",
        subtopics: ["Memoization", "Tabulation", "Knapsack", "Longest Common Subsequence"]
      },
      {
        name: "Greedy Algorithms",
        description: "Algorithms that make locally optimal choices.",
        difficulty: "Medium",
        subtopics: ["Activity Selection", "Huffman Encoding", "Job Sequencing", "Greedy Choice Property"]
      },
      {
        name: "Recursion & Backtracking",
        description: "Solving problems via recursion and undoing choices.",
        difficulty: "Hard",
        subtopics: ["Recursion Basics", "N-Queens", "Sudoku Solver", "Subsets/Permutations"]
      }
    ];

    const topicsContainer = document.getElementById("topics");
    const progressBar = document.getElementById("progress");

    function saveProgress(progress) {
      localStorage.setItem("dsaProgress", JSON.stringify(progress));
    }

    function loadProgress() {
      const saved = localStorage.getItem("dsaProgress");
      if (!saved) return {};
      try {
        return JSON.parse(saved);
      } catch {
        return {};
      }
    }

    function updateProgressBar(progress) {
      let total = 0, done = 0;
      topics.forEach((topic, i) => {
        total++;
        if (progress[i]?.main) done++;
        topic.subtopics.forEach((_, j) => {
          total++;
          if (progress[i]?.subtopics?.[j]) done++;
        });
      });
      const percent = total === 0 ? 0 : (done / total) * 100;
      progressBar.style.width = percent + "%";
    }

    function onMainCheckboxChange(topicIndex, checked, progress) {
      progress[topicIndex] = progress[topicIndex] || { main: false, subtopics: [] };
      progress[topicIndex].main = checked;
      progress[topicIndex].subtopics = topics[topicIndex].subtopics.map(() => checked);
      saveProgress(progress);
      renderTopics(document.getElementById("difficultyFilter").value, progress);
      updateProgressBar(progress);
    }

    function onSubtopicCheckboxChange(topicIndex, subIndex, checked, progress) {
      progress[topicIndex] = progress[topicIndex] || { main: false, subtopics: [] };
      progress[topicIndex].subtopics[subIndex] = checked;
      const allChecked = topics[topicIndex].subtopics.every((_, i) => progress[topicIndex].subtopics[i]);
      progress[topicIndex].main = allChecked;
      saveProgress(progress);
      renderTopics(document.getElementById("difficultyFilter").value, progress);
      updateProgressBar(progress);
    }

    function resetProgress() {
      localStorage.removeItem("dsaProgress");
      renderTopics(document.getElementById("difficultyFilter").value, {});
      updateProgressBar({});
    }

    function renderTopics(filter = "All", progress = {}) {
      topicsContainer.innerHTML = "";
      topics.forEach((topicObj, topicIndex) => {
        if (filter !== "All" && topicObj.difficulty !== filter) return;

        const div = document.createElement("div");
        div.className = "topic";

        const header = document.createElement("div");
        header.className = "topic-header";

        const mainCheckbox = document.createElement("input");
        mainCheckbox.type = "checkbox";
        mainCheckbox.checked = progress[topicIndex]?.main || false;
        mainCheckbox.addEventListener("change", e => {
          onMainCheckboxChange(topicIndex, e.target.checked, progress);
        });

        const label = document.createElement("label");
        label.textContent = `${topicObj.name} (${topicObj.difficulty})`;

        header.appendChild(mainCheckbox);
        header.appendChild(label);

        const description = document.createElement("div");
        description.className = "description";
        description.textContent = topicObj.description;

        const subtopicList = document.createElement("ul");
        subtopicList.className = "subtopics";

        topicObj.subtopics.forEach((subtopic, subIndex) => {
          const li = document.createElement("li");
          const subCheckbox = document.createElement("input");
          subCheckbox.type = "checkbox";
          subCheckbox.checked = progress[topicIndex]?.subtopics?.[subIndex] || false;
          subCheckbox.addEventListener("change", e => {
            onSubtopicCheckboxChange(topicIndex, subIndex, e.target.checked, progress);
          });

          const subLabel = document.createElement("label");
          subLabel.textContent = subtopic;

          li.appendChild(subCheckbox);
          li.appendChild(subLabel);
          subtopicList.appendChild(li);
        });

        div.appendChild(header);
        div.appendChild(description);
        div.appendChild(subtopicList);

        topicsContainer.appendChild(div);
      });
    }

    function filterTopics() {
      const filter = document.getElementById("difficultyFilter").value;
      const progress = loadProgress();
      renderTopics(filter, progress);
      updateProgressBar(progress);
    }

    function toggleTheme() {
      const body = document.body;
      const isLight = body.classList.toggle("light");
      localStorage.setItem("dsaTheme", isLight ? "light" : "dark");
      updateThemeIcon();
    }

    function applySavedTheme() {
      const theme = localStorage.getItem("dsaTheme") || "dark";
      document.body.classList.toggle("light", theme === "light");
      updateThemeIcon();
    }

    function updateThemeIcon() {
      const icon = document.getElementById("themeIcon");
      const isLight = document.body.classList.contains("light");
      icon.textContent = isLight ? "ðŸŒž" : "ðŸŒ™";
    }

    window.addEventListener("load", () => {
      applySavedTheme();
      const progress = loadProgress();
      renderTopics("All", progress);
      updateProgressBar(progress);
    });
  </script>
</body>
</html>